# **Инструкция по работе с системой контроля версий Git**

![Эмблема Git](git.jpg)

Git (произносится «гит») — распределённая система управления версиями. Проект был создан Линусом Торвальдсом для управления разработкой ядра Linux, первая версия выпущена 7 апреля 2005 года. На сегодняшний день его поддерживает Джунио Хамано.

## Инициализация репозитория

Чтобы создать (инициализировать) новый репозиторий нужно в терминале ввести команду:

    git init

Репозиторий будет создан в той папке, из которой вызывалась команда

## Проверка состояния репозитория

Чтобы проверить текущее состояние репозитория нужно ввести в терминале команду:

    git status

## Добавление изменения к отслеживанию версионности

Чтобы добавить сделанное изменение к отслеживанию (поместить в индекс) нужно ввести команду:

    git add <имя файла>

где вместо <имя файла> вводится путь к файлу относительно расположения репозитория.

## Фиксация изменений

Чтобы зафиксировать изменение используется команда:

    git commit

В таком случае откроется окно для ввоба краткого описания сделанных изменений.

Чтобы сделать это одновременно с фиксацией используется команда:

    git commit -m "комментарий"

## Просмотр истории изменений

Чтобы посмотреть историю изменений используется комада

    git log

Для просмотра изменений с выводом одного коммита в одну строку используется команда

    git log --oneline

Для просмотра всех имеющихся коммитов используется команда

    git log --all

Для просмотра лога с графическим изображением веток используется команда

    git log --graph

Все указанные флаги могут использоваться вместе:

    git log --all --oneline --graph

## Просмотр различий между изменениями

Для просмотра отличий между текущим состоянием репозитория и последним сохраненным изменением используется команда

    git diff

Можно также посмотреть разницу между любыми двуми коммитами. Для этого используется команда

    git diff <хэш1> <хэш2>

## Переключение на нужное изменение

Чтобы переключиться на нужный коммит используется команда

    git checkout <хэш>

## Ветки в Git

### Создание новой ветки

Чтобы создать новую ветку используется команда

    git branch <имя_ветки>

### Просмотр всех веток

Чтобы посмотреть какие ветки существуют и на какой мы находимся используется команда

    git branch

### Переключение между ветками

Чтобы переключиться на другую ветку используется команда

    git checkout <имя_ветки>

### Слияние веток

Чтобы влить одну ветку в другую необходимо находясь в целевой ветке (КУДА будем делать слияние) выполнить команду

    git merge <имя_вливаемой_ветки>

### Конфликты при слиянии

Если одна и та же строка в разный версиях записана по разному возникнет конфликт.
Чистый гит автоматически сохраняет оба изменения, далее требуется вручную внести нужные правки и сделать коммит.

VSСode дает возможность выбрать какое изменение сохранить (входящее, существующее или оба).

### Удаление ветки

Чтобы удалить ветку, которая больше не нужно (например после слияния) используется команда

    git branch -d <имя_ветки>
## Удаленный репозиторий
__Удаленный (иногда говорят "внешний") репозиторий__ – это версии вашего проекта, сохраненные на удаленном сервере. Доступ к репозиторию на таком сервере может осуществляться по интернету или по локальной сети.
Удаленный репозиторий – полноценный репозиторий, ничем не отличающийся от локального. У удаленного репозитория есть собственные ветки, собственный указатель HEAD, своя история коммитов и так далее. Если мы подключим удаленный репозиторий к своему локальному, то у нас появятся копии всех ссылочных объектов удаленного репозитория. То есть, например, у удаленного репозитория есть ветка main, а у нас будет копия этой ветки – origin/main. Все такие ссылочные объекты (указатели, ветки и теги) удаленного репозитория хранятся почти там же, где и у локального – в директории .git/refs/remotes/<имя_удаленного_репозитория>.

### Добавление связи с удаленным репозиторем
Чтобы добавить новый удаленный репозиторий, выполните команду:

    git remote add
Команда git remote add принимает два аргумента:

*   имя удаленного репозитория, например, origin;
*   URL-адрес удаленного репозитория, например, https://github.com/user/repo.git

### Удаление связи с удаленным репозиторием
Иногда возникает необходимость забыть удаленный репозиторий. Для этого существует команда:

     git remote remove.

Данная команда предельно проста в использовании. В качестве имени репозитория нужно передавать то имя, которое вы указывали в команде git remote add. Заметьте, данная команда не удаляет удаленный репозиторий с сервера, она удаляет только подключение вашего репозитория к удаленному.

## Команды для работы с удаленным репозиторием
Для того, чтобы скачать все изменения с удаленного репозитория, необходимо ввести команду:

    git pull
git pull - вначале забирает изменения из указанного удалённого репозитория, а затем пытается слить их с текущей веткой.

Для того, что бы скачать только изменения, без операции merge, необходимо ввести команду:

    git fetch
После добавления изменений и создания коммитов, необходимо отправить это все в удаленный репозиторий, делается это командой

    git push
после создания связи с удаленным репозиторием, первая команда git push делается так:

    git push -u origin main - (здесь мы указываем в какой именно репозиторий мы будем пушить изменения и в какую ветку, в данном случаем репозиторий origin, ветка main)
после первого пуша, все изменения можно отправлять командой git push (без аргументов)
## Клонирование удаленного репозитория
Иногда есть необходимость клонировать открытый репозиторий другого человека. Операция клонирования создаёт на вашем компьютере точную копию удаленного репозитория и позволяет с ней работать как со своей. Необходимость клонировать существующий удаленный репозиторий возникает в ситуациях, когда вы решаете поработать над уже существующим кодом в своем проекте. Для выполнения этой операции в Git предусмотрена команда

    git clone.
Необходимо добавить адрес стороннего репозитория как аргумент к команде git clone:
    
    git clone https://github.com/"nameuser"/"namerepository".git
### Работа над сторонним репозиторием с возможностью внесения изменений в него (предложение изменений)
Форк публичного проекта (участие в открытом проекте) отличается от обычной работы в удаленном репозитории. Основное отличие в том, что у Вас нет возможность напрямую заливать изменения в ветки открытого стороннего проекта. Общий алгоритм работы с открытым проектам выглядит так, этапы:

1.  Fork проекта в свой репозиторий
![](https://thumb.tildacdn.com/tild6139-3866-4266-b562-383466366537/-/resize/900x/-/format/webp/12_git_fetch_pull_pu.png)
![](https://thumb.tildacdn.com/tild6166-6564-4437-a232-316433383366/-/resize/960x/-/format/webp/13_git_fetch_pull_pu.png)
2.  Клонирование проекта в среду разработки
3.  Создание отдельной ветки, для работы с проектом
4.  Внесение изменений (коммиты)
5.  Предложение изменгений

Если вы создаете новую ветку для работы в открытом проекте, то при первом Push форкнутого проекта, если в нем нет ветки с таким же названием, которую создали Вы получите сообщение с предупреждением 
    
    fatal: The current branch myProj has no upstream branch.
    To push the current branch and set the remote as upstream, use
Необходимо ввести push с аргументом (в первый раз после push новой ветки), следующей командой:

    git push --set-upstream origin nameBranch (nameBranch - имя созданной ветки, для работы с удаленным открытым репозиторием проекта)

после внесения изменений вы можете предложить автору внести изменения в его проект. Сделать это можно как на сайте git hub, используя элементы интерфейса в репозитории, __СПОСОБ №1__ (веб интерфейс):

На странице своей репозитория (форкнутый проект, видим появление новых элементов управления). Нажимаем на кнопку Compare на подсказке GitHub, либо переходим на вкладку Pull Requests и нажимаем New pull request.
![](https://thumb.tildacdn.com/tild3937-3762-4239-b835-316636363135/-/resize/960x/-/format/webp/15_git_fetch_pull_pu.png)
Перед нами откроется страница создания пулл-реквеста.
![](https://thumb.tildacdn.com/tild3461-6636-4339-b038-343162346365/-/resize/960x/-/format/webp/16_git_fetch_pull_pu.png)
Здесь мы можем просмотреть внесенные изменения и выбрать две ветки: одну в исходном репозитории, на нее будут залиты наши изменения, вторую – в нашем репозитории, с нее будут скачаны изменения. Как только мы выбрали ветки и убедились, что не внесли никаких лишних изменений, нажимаем кнопку Create pull request.
![](https://thumb.tildacdn.com/tild6632-3063-4466-a662-616162613337/-/resize/960x/-/format/webp/17_git_fetch_pull_pu.png)
Здесь необходимо описать, что за изменения вы внесли и почему они были необходимы. Сообщение, которое оставили мы, видно на картинке. Оно отражает суть и необходимость внесенных изменений. Как только мы закончили с описанием, можно нажимать кнопку Create pull request.
Теперь мы попадаем на страницу уже созданного пулл-реквеста в изначальном репозитоии. В нашем случае он выглядит так.
![](https://thumb.tildacdn.com/tild3061-6630-4031-b832-613663646138/-/resize/960x/-/format/webp/18_git_fetch_pull_pu.png)

__СПОСОБ №2__ (терминал):

Команда git request-pull принимает в качестве аргументов название базовой ветки, в которую следует влить изменения из вашей тематической ветки, и ссылку на Git репозиторий, из которого следует получать изменения, а результатом будет список всех изменений, которые вы предлагаете внести. Например, если Пользователь хочет отправить автору проекта запрос слияния и он отправил два коммита в тематическую ветку, то следует выполнить команду:

    git request-pull origin/"NameBranch" NameProjectrFork